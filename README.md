# dsi202

# IMSUK
**IMSUK**
Youtube : https://youtu.be/uAE1KEzBcJ4?si=Es0FN_65nIddfTes

# บทคัดย่อ
**_IMSUK (อิ่มสุข)**_ คือระบบเว็บแอปพลิเคชันเพื่อการจัดส่งอาหารที่พัฒนาขึ้นโดยมีวัตถุประสงค์เพื่อเป็นสื่อกลางระหว่างร้านอาหารในชุมชนกับผู้บริโภค โดยมุ่งเน้นการลดปัญหา **“ขยะอาหาร”** (Food Waste) ซึ่งเป็นปัญหาที่ทวีความรุนแรงมากขึ้นในทุกวัน ทั้งในด้านสิ่งแวดล้อม เศรษฐกิจ และการใช้ทรัพยากรอย่างไม่มีประสิทธิภาพ โดยเฉพาะอาหารที่ยังคงสภาพดีแต่ต้องถูกทิ้งเนื่องจากจำหน่ายไม่ทันตามเวลาที่กำหนด ส่งผลให้ผู้ประกอบการต้องเผชิญกับต้นทุนที่สูญเปล่า ขณะที่ผู้บริโภคจำนวนไม่น้อยยังเข้าไม่ถึงอาหารคุณภาพในราคาที่เอื้อมถึง

ระบบ “อิ่มสุข” จึงได้รับการพัฒนาขึ้นเพื่อเปิดพื้นที่ให้ร้านอาหารชุมชนสามารถนำเสนออาหารที่ยังคงคุณภาพดีมาจำหน่ายในราคาพิเศษผ่านช่องทางออนไลน์ โดยมีส่วนลดตั้งแต่ 40% ขึ้นไป เพื่อกระตุ้นให้เกิดการตัดสินใจซื้อ ช่วยลดโอกาสที่อาหารเหล่านั้นจะกลายเป็นขยะ และในขณะเดียวกัน ยังช่วยเพิ่มรายได้ให้กับผู้ประกอบการรายย่อยในท้องถิ่น

นอกจากบทบาทด้านการจำหน่ายอาหารแล้ว “อิ่มสุข” ยังเป็นเครื่องมือที่ส่งเสริมแนวคิดการบริโภคอย่างยั่งยืนในระดับระบบอาหาร โดยช่วยลดปริมาณขยะอินทรีย์ซึ่งเป็นแหล่งกำเนิดก๊าซเรือนกระจกจากหลุมฝังกลบ ลดการใช้ทรัพยากรโดยเปล่าประโยชน์ในกระบวนการผลิตอาหาร อันได้แก่ การเพาะปลูก การแปรรูป การขนส่ง และการจัดเก็บ ซึ่งล้วนใช้ทรัพยากรธรรมชาติจำนวนมาก อาทิ พื้นที่เกษตร น้ำสะอาด ปุ๋ย และเชื้อเพลิง ดังนั้น การที่อาหารเหล่านี้ถูกทิ้งโดยมิได้ถูกบริโภค ย่อมถือเป็นการสูญเสียทั้งทางเศรษฐกิจและสิ่งแวดล้อม

“อิ่มสุข” จึงไม่เพียงเป็นช่องทางในการจัดจำหน่ายอาหารในราคาประหยัด หากแต่ยังเป็นนวัตกรรมที่ผสมผสานเทคโนโลยีเข้ากับแนวคิดเพื่อสังคม เพื่อสร้างคุณค่าใหม่ให้กับสิ่งที่อาจถูกมองว่าไร้ค่า เสริมสร้างการใช้ทรัพยากรอย่างรู้คุณค่า และหมุนเวียนภายในระบบเศรษฐกิจชุมชนอย่างยั่งยืน ทั้งยังเป็นการสร้างผลกระทบเชิงบวกต่อผู้บริโภค ชุมชน และสิ่งแวดล้อมอย่างรอบด้าน

# User Stories

## **สำหรับลูกค้า**

### การสั่งซื้อและค้นหาอาหาร
    1. **ในฐานะผู้บริโภค** ฉันต้องการ ค้นหา เลือกดู และสั่งอาหารลดราคาจากร้านค้าใกล้เคียงในชุมชน เพื่อที่ว่า จะได้รับประทานอาหารคุณภาพดีในราคาถูกและย่อมเยา และช่วยลดขยะอาหาร
    2. **ในฐานะผู้บริโภค** ฉันต้องการ ค้นหาและสั่งซื้ออาหารอย่างปลอดภัย เพื่อที่ว่า ฉันจะสามารถหลีกเลี่ยงการบริโภคส่วนผสมที่แพ้ และมั่นใจในความปลอดภัยของอาหารที่เลือกสั่ง

### การเข้าสู่ระบบและออกจากระบบ
    3. **ในฐานะผู้บริโภค** ฉันต้องการ เข้าสู่ระบบด้วยบัญชี Google ของฉัน เพื่อที่ว่า จะสามารถเข้าสู่ระบบได้อย่างรวดเร็ว ไม่ต้องจำรหัสผ่าน และเพิ่มความสะดวกในการใช้งานบนหลายอุปกรณ์
    4. **ในฐานะผู้บริโภค** ฉันต้องการ ออกจากระบบเมื่อใช้งานเสร็จ เพื่อที่ว่า ป้องกันข้อมูลส่วนตัวถูกเข้าถึงโดยไม่ได้รับอนุญาต โดยเฉพาะเมื่อใช้งานในเครื่องสาธารณะ

### การชำระเงิน
    5. **ในฐานะผู้บริโภค** ฉันต้องการ เลือกช่องทางการชำระเงิน เช่น PromptPay หรือเงินสดปลายทาง เพื่อที่ว่า จะสามารถเลือกวิธีที่สะดวกและเหมาะสมกับฉันได้
    6. **ในฐานะผู้บริโภค** ฉันต้องการ รับการยืนยันเมื่อชำระเงินสำเร็จ เพื่อที่ว่า จะมั่นใจได้ว่ารายการสั่งซื้อของฉันถูกบันทึกและจัดส่งแน่นอน 

### การตรวจสอบประวัติการสั่งซื้อ
    7. **ในฐานะผู้บริโภค** ฉันต้องการ ตรวจสอบประวัติการสั่งซื้อย้อนหลัง เพื่อที่ว่า สามารถติดตามการซื้ออาหารของฉันได้

## **สำหรับสำหรับแอดมินระบบ**
### การจัดการระบบ
    1. **ในฐานะผู้ดูแลระบบ** ฉันต้องการ เป็นตัวเชื่อมระหว่างร้านค้าและผู้บริโภค เพื่อที่ว่า ร้านค้าสามารถจำหน่ายอาหารที่มีคุณภาพแก่ผู้บริโภคได้อย่างต่อเนื่องและมีประสิทธิภาพ

### การจัดการบัญชีผู้ใช้งานและธุรกรรม
    2. **ในฐานะผู้ดูแลระบบ ฉันต้องการ** จัดการบัญชีผู้ใช้งานและตรวจสอบการทำธุรกรรม เพื่อที่ว่า ระบบทำงานได้อย่างราบรื่นและปลอดภัย

# ขั้นตอนการใช้งานตาม User Stories

## **สำหรับลูกค้า**

### การค้นหาและสั่งซื้ออาหาร
-   ผู้บริโภคเปิดหน้าเว็บและเลือกดูอาหารจากร้านค้าที่ใกล้เคียง
-	ดูรายละเอียด ส่วนประกอบที่อาจก่อให้เกิดอาการแพ้ ในหน้ารายละเอียด
-	เลือกอาหารที่ต้องการ
-	กดปุ่ม "ดำเนินการชำระเงิน" เพื่อทำการสั่งอาหาร
-	ระบบแสดงหน้าการชำระเงินให้เลือกช่องทางการชำระเงิน (PromptPay หรือเงินสด)
-	ผู้บริโภคชำระเงินเพื่อยืนยันการสั่งซื้อ

### การตรวจสอบประวัติการสั่งซื้อ
-	ผู้บริโภคคลิกที่ชื่อโปรไฟล์ เลือก "ประวัติการสั่งซื้อ"
-	ระบบแสดงรายการสั่งซื้อทั้งหมด พร้อมรายละเอียด

### การเข้าสู่ระบบด้วย Google
-	ผู้บริโภคเลือก "เข้าสู่ระบบด้วย Google"
-	ระบบเชื่อมต่อกับบัญชี Google
-	ผู้บริโภคสามารถเข้าสู่ระบบได้อย่างรวดเร็วโดยไม่ต้องกรอกรหัสผ่าน

### การออกจากระบบ
-	ผู้บริโภคคลิกที่ชื่อโปรไฟล์ เลือก "ออกจากระบบ"
-	ระบบทำการออกจากระบบและกลับสู่หน้าแรก

## **สำหรับสำหรับแอดมินระบบ**

### การเชื่อมต่อระหว่างร้านค้าและผู้บริโภค
-	ผู้ดูแลระบบเข้าสู่หน้าแอดมิน
-	เพิ่มร้านค้าและรายละเอียดต่างๆ 
-	จัดการการเชื่อมต่อระหว่างร้านค้าและลูกค้า

### การจัดการบัญชีผู้ใช้งาน
-	ผู้ดูแลระบบเข้าสู่หน้า "การจัดการบัญชีผู้ใช้งาน"
-	สามารถตรวจสอบข้อมูลผู้ใช้งานและสถานการณ์ชำระเงิน


# การติดตั้งและใช้งาน

## **การติดตั้งแบบปกติ** 
ผู้พัฒนาหรือผู้สนใจสามารถติดตั้งระบบ IMSUK (อิ่มสุข) ได้บนเครื่องคอมพิวเตอร์ที่ติดตั้ง Python และ Virtual Environment แล้ว โดยมีขั้นตอนดังนี้
1. Clone project หรือดาวน์โหลด code จาก github
```bash
git clone <ลิงก์ GitHub Repository ของโปรเจกต์>
cd week05_imsuk/myproject
```

2. สร้าง Virtual Environment และติดตั้งไลบรารีที่จำเป็น
```bash
python -m venv venv 
source venv/bin/activate  # macOS/Linux
venv\Scripts\activate     # Windows

pip install -r requirements.txt
```
*หมายเหตุ: หากไม่มี requirements.txt ให้ใช้คำสั่ง pip freeze > requirements.txt เพื่อบันทึกแพ็กเกจที่ใช้*

3.	ตั้งค่าตัวแปรแวดล้อม (Environment Variables)
สร้างไฟล์ .env และใส่ค่าดังนี้
```ini
GOOGLE_CLIENT_ID=ใส่ค่าจาก Google API Console
GOOGLE_CLIENT_SECRET=ใส่ secret ของแอปคุณ
```

4.	ดำเนินการ Migrate ฐานข้อมูล
```bash
python manage.py makemigrations
python manage.py migrate
```

5.	สร้าง Superuser สำหรับเข้าใช้งานระบบหลังบ้าน (Admin)
```bash
python manage.py createsuperuser
```

6.	รันเซิร์ฟเวอร์
```bash
python manage.py runserver
```

เมื่อระบบพร้อมใช้งาน สามารถเข้าใช้งานได้ผ่านเบราว์เซอร์ที่ 
```cpp
http://127.0.0.1:8000/
```


## 🐳 **การติดตั้งและใช้งานด้วย Docker**
1.	ตรวจสอบว่าเครื่องมี Docker และ Docker Compose
Docker: https://www.docker.com/products/docker-desktop
ตรวจสอบด้วยคำสั่ง:
```bash
docker –version
docker-compose --version
```

2.	ตรวจสอบหรือสร้างไฟล์ docker-compose.yml
```yaml
services:
  db:
    image: postgres:14
    container_name: postgres
    volumes:
      - db_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_DB=django_db
      - POSTGRES_USER=django_user
      - POSTGRES_PASSWORD=django_pass
    ports:
      - "5432:5432"
    restart: unless-stopped

  web:
    build:
      context: .
      dockerfile: Dockerfile.django
    container_name: django
    volumes:
      - .:/usr/src/app:rw
    ports:
      - "8000:8000"
    environment:
      - PYTHONUNBUFFERED=1
      - POSTGRES_DB=django_db
      - POSTGRES_USER=django_user
      - POSTGRES_PASSWORD=django_pass
      - POSTGRES_HOST=db
    env_file:
      - .env
    depends_on:
      - db
    command: /bin/bash /usr/src/app/entrypoint.sh

  jupyter:
    build:
      context: .
      dockerfile: Dockerfile.jupyter
    container_name: jupyter
    working_dir: /usr/src/app/myproject
    volumes:
      - .:/usr/src/app:rw
    ports:
      - "8888:8888"
    environment:
      - PYTHONUNBUFFERED=1
    depends_on:
      - db

volumes:
  db_data:
```

3.  สร้าง .env สำหรับค่าต่าง ๆ
```ini
DEBUG=True
SECRET_KEY=django-secret-key-here
GOOGLE_CLIENT_ID=xxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-secret
```

4.	Build และรันโปรเจกต์ด้วย Docker Compose
```bash
docker-compose build
docker-compose up
```
ระบบจะพร้อมใช้งานที่ http://localhost:8000/

5.	กรณี migrate หรือ createsuperuser
เข้าใช้ Bash ใน container
```bash
docker-compose exec web bash
python manage.py migrate
python manage.py createsuperuser
```

หรือ
```bash
docker-compose exec web python myproject/manage.py makemigrations
docker-compose exec web python myproject/manage.py migrate  
docker-compose exec web python myproject/manage.py createsuperuser
```


## **การใช้งาน**

1.	การเข้าถึงแอปพลิเคชัน
    -เข้าไปที่ http://localhost:8000 บนเว็บเบราว์เซอร์ของคุณ
2.	การใช้งานสำหรับผู้บริโภค (Customer)
    -	เข้าสู่ระบบ ผู้ใช้สามารถเข้าสู่ระบบผ่านบัญชี Google หรือบัญชีที่สร้างไว้ในระบบ
    -	ค้นหาร้านอาหาร ผู้ใช้สามารถค้นหาร้านค้าและรายการอาหารในพื้นที่
    -	การสั่งซื้อ ผู้ใช้สามารถเลือกอาหารและดำเนินการชำระเงินผ่านช่องทางที่เลือก เช่น PromptPay หรือเงินสดปลายทาง
    -	การตรวจสอบประวัติการสั่งซื้อ ผู้บริโภคสามารถดูประวัติการสั่งซื้อย้อนหลังที่หน้าประวัติการสั่งซื้อ
3.	การใช้งานสำหรับผู้ดูแลระบบ (Admin)
    -	เข้าสู่ระบบ Admin เข้าสู่ระบบที่ http://localhost:8000/admin ด้วยบัญชีผู้ดูแลระบบที่สร้างขึ้น
    -	การจัดการร้านค้าและผู้ใช้ ผู้ดูแลสามารถตรวจสอบและจัดการการสั่งซื้อของผู้บริโภค ตรวจสอบสถานะการชำระเงิน รวมถึงการจัดการข้อมูลร้านค้า
